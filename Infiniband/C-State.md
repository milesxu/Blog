# C-State

模式|名称|它能做什么|中央处理器
---|:--|--:|---
C0|Operating State|CPU完全开启|所有CPU
C1|Halt|通过软件停止CPU主内部时钟；总线接口单元和APIC保持全速运行。|486DX4及以上
C1E|Enhanced Halt|通过软件停止CPU主内部时钟并降低CPU电压；总线接口单元和APIC保持全速运行。|所有插座LGA775 CPU
C1E|-|停止所有CPU内部时钟。|Turion 64、65纳米Athlon X2和Phenom CPU
C2|Stop Grant|通过硬件停止CPU主内部时钟；总线接口单元和APIC保持全速运行。|486DX4及以上
C2|Stop Clock|通过硬件停止CPU内部和外部时钟|仅486DX4，Pentium，Pentium MMX，K5，K6，K6-2，K6-III
C2E|Extended Stop Grant|通过硬件停止CPU主内部时钟并降低CPU电压；总线接口单元和APIC保持全速运行。|Core 2 Duo及更高版本（仅Intel）
C3|Sleep|停止所有CPU内部时钟|Pentium II，Athlon及更高版本，但不在Core 2 Duo E4000和E6000上
C3|Deep Sleep|停止所有CPU内部和外部时钟|奔腾II及更高版本，但不在Core 2 Duo E4000和E6000上；炫龙64
C3|AltVID|停止所有CPU内部时钟并降低CPU电压|AMD Turion 64
C4|Deeper Sleep|降低CPU电压|奔腾M及更高版本，但不适用于Core 2 Duo E4000和E6000系列；AMD Turion 64
C4E/C5|Enhanced Deeper Sleep|进一步降低CPU电压并关闭内存缓存	仅Core Solo，Core Duo和45纳米移动Core 2 Duo
C6|Deep Power Down|将CPU内部电压降低到任何值，包括0 V	仅适用于45纳米移动Core 2 Duo


## C1 State

**低功耗模式(软件控制)**

所有x86 CPU都有一条称为“ HLT”（“暂停”）的指令，其中CPU保持“停止”，空闲，在运行时不执行任何操作。CPU收到中断后即恢复工作，这是一种硬件信号，它告诉CPU现在停止正在做的事情，并照顾发送该信号的硬件设备。

由于在暂停模式下CPU完全处于空闲状态，因此英特尔认为这是降低CPU功耗的理想之地，因此他们从现在开始就添加了“暂停”或“自动暂停”模式（现在称为C1状态）。 486DX4处理器。Intel和AMD的486DX4之后的所有CPU均实现此模式，并且486DX2的“ SL增强”版本也实现此模式。

因此，在程序运行HLT指令后，CPU进入传统的暂停模式，但是现在内部CPU时钟信号停止了（只有CPU内部的两个单元继续被CPU内部时钟，总线接口单元和Advanced Programmable供电。中断控制器APIC；这样做是为了在有重要请求通过CPU外部总线时允许CPU暂时退出暂停状态。CPU一旦接收到中断信号，便会恢复其正常工作状态，并恢复时钟信号。

由于几乎所有CPU内部单元都停止了时钟信号，因此它们停止运行，从而降低了功耗。

足够有趣的是，由于第一个8086 CPU之后存在HLT指令，因此无需特殊编程即可使CPU进入C1状态。486DX4之前，基本上使用HLT指令来停止CPU并使其等待中断。使用此CPU之后，程序员可以使用此模式将CPU置于较低的功耗状态。

如上所述，CPU可以暂时退出暂停（C1）状态，以处理通过CPU外部总线发出的重要请求。此暂时休假称为“停止时钟侦听状态”，“ HALT /授权侦听状态”或简称为“侦听状态”，在其持续时间内将恢复CPU时钟。CPU处理完请求后，它将自动返回到暂停（C1）状态。

所有基于插槽LGA775的Intel CPU（例如Pentium 4，Core 2 Duo）具有称为“增强暂停”（与Pentium 4 CPU一起使用的命名），“ Extended Halt”（与Core 2 Duo CPU一起使用的命名）或C1E的高级暂停状态。除了停止CPU内部时钟外，还降低了CPU电压。如果在主板BIOS上启用了此模式，则在发出HLT指令时，CPU将进入此模式，而不是传统的暂停（C1）模式。否则，CPU将继续使用标准的暂停模式。

Core 2 Duo还引入了Extended Halt / Stop Grant Snoop状态，该状态允许CPU暂时退出C1E或C2E模式，以响应来自CPU外部总线的重要请求，但保持CPU较低的电压而不是恢复CPU的满载状态。电压。

请注意，因为AMD也将名称C1E用于完全不同的事物。在其65纳米Athlon X2和Phenom CPU上，C1E状态的工作方式与C3状态一样，关闭了所有CPU时钟。在BIOS上启用此选项后，CPU进入C1E状态，并且所有CPU内核均进入常规C1（暂停）状态。发生这种情况时，CPU会自动切换到C1E状态以节省能源。AMD的C1E和C3状态之间的区别基本上是CPU进入睡眠状态的方式：在传统的C3状态下，通常必须通过操作系统发出的命令将CPU置于该状态，而在C1E上，CPU会自动进入睡眠状态当所有核心都处于停止（C1）状态时。


## C2 State

**低功耗模式（硬件控制）**

通过向CPU添加一个称为“ STPCLK”（“停止时钟”）的额外引脚，486DX4也引入了C2状态。激活该引脚后，CPU内核时钟将被切断。

如您所见，C2状态与C1状态有些相似：两者都削减了CPU内核时钟。它们之间的区别在于CPU的实现方式：C1状态由软件激活（通过“ HLT”指令），而C2状态由硬件激活（通过将信号发送到称为“ STPCLK”的CPU引脚）。

就像CPU处于C1状态时一样，当CPU进入C2状态时，CPU内部时钟也不会完全停止：总线接口和APIC单元仍在以CPU内部时钟速率供电。这样做是为了允许CPU暂时退出C2状态，以处理来自CPU外部总线的重要请求。

由于几乎所有CPU内部单元都停止了时钟信号，因此它们停止运行，从而降低了功耗。

C2状态有两种子模式：停止授权和停止时钟。激活“ STPCLK”引脚后，即可获得停止授权。如所说明的，在这种模式下，CPU核心时钟停止运行，但时钟生成器芯片（也称为PLL，锁相环）仍处于活动状态，并生成外部总线参考时钟，即CPU外部时钟。

486DX4，Pentium，Pentium MMX，K5，K6，K6-2和K6-III可以更进一步，进入更深的子状态，称为“停止时钟”，该时钟发生器芯片将被关闭，因此外部时钟信号也将被关闭。关闭，从而节省更多能量。当前的CPU在C2状态下没有停止时钟模式，而在C3深度睡眠状态下。

与暂停（C1）状态一样，CPU可以暂时退出停止授权（C2）状态，以处理通过CPU外部总线发出的重要请求。此暂时休假称为“停止时钟侦听状态”，“ HALT /授权侦听状态”或简称为“侦听状态”，在其持续时间内将恢复CPU时钟。CPU处理完请求后，它将自动返回到停止授权（C2）状态。

Core 2 Duo CPU带来了高级停止授权状态，称为扩展停止授权或C2E，除了停止CPU内部时钟外，它还降低了CPU电压。如果在主板BIOS上启用了此模式，则在激活STPCLK引脚后，CPU将进入此模式，而不是传统的停止授权（C2）模式。否则，CPU将继续使用标准的停止授权模式。

该CPU还引入了扩展暂停/停止授权侦听状态，该状态允许CPU暂时退出C1E或C2E模式，以响应来自CPU外部总线的重要请求，但保持CPU较低的电压而不是恢复CPU的全电压。 

## C3 State

C3，也称为睡眠状态，首先在Intel的Pentium II和AMD的第一个Athlon CPU上使用。有趣的是，这种模式在65纳米制程的Core 2 Duo CPU上不可用，即型号以“ 4”或“ 6”开头，但是这些CPU实现了提到的其他“扩展”状态（C1E和C2E）之前。采用45纳米工艺制造的Core 2 Duo（即型号以“ 7”或“ 8”开头的产品）确实又恢复了该模式。

正如我们所解释的，当CPU处于“暂停”（C1）或“停止授权”（C2）状态时，CPU内部时钟几乎会从CPU内部的所有单元中切断，从而使其停止运行，从而减少了功耗。但是，在这些状态下，两个内部CPU单元保持运行：总线接口单元和APIC（高级可编程接口控制器）。这些单元保持运行状态，因此CPU可以处理来自CPU外部总线的重要请求并可以处理中断。

下一个状态Sleep（C3）会切断来自CPU的所有内部时钟信号，包括来自总线接口单元和APIC的时钟。这意味着，当CPU处于睡眠模式时，它无法响应来自CPU外部总线的重要请求，也无法响应中断。

AMD的Intel CPU和Turion 64支持C3子模式，称为“深度睡眠”，该模式下CPU外部时钟也被停止，从而节省了更多电量。

CPU进入C3状态的方式取决于制造商。英特尔CPU添加了一个称为SLP（或DPSLP，取决于CPU型号）的额外引脚，当CPU处于C2状态时必须将其激活才能将CPU切换到C3状态。因此，必须先激活STPCLK引脚，然后再激活SLP引脚。进入深度休眠状态是通过简单地切断外部时钟信号来实现的。

在AMD CPU上，只需从物理上位于芯片组上的ACPI（高级控制电源接口）电路中读取一个寄存器即可进入C3状态。如果程序读取PLVL_2寄存器，则芯片组将激活STPCLK引脚，从而使CPU进入停止授权（C2）模式；如果程序读取PLVL_3寄存器，则芯片组将激活STPCLK引脚，从而使CPU进入睡眠（C3）模式。 。

AMD移动CPU（Turion 64）支持称为AltVID的子模式，该子模式允许在C3模式下降低CPU电压。

同样不要忘记Turion 64、65纳米Athlon X2和Phenom CPU还具有一种称为C1E的模式，该模式与Intel的C1E无关，后者将CPU置于与C3相同的模式。AMD的C1E和C3状态之间的区别基本上是CPU进入睡眠状态的方式：在传统的C3状态下，通常必须通过操作系统发出的命令将CPU置于该状态，而在C1E上，CPU进入睡眠状态当所有内核均处于停止（C1）状态时，此功能自动运行。

## C4 State

模式C1，C2和C3主要处理时钟信号。由于在C3模式下可以停止CPU内部的所有时钟信号，因此没有其他方法可以通过播放CPU时钟信号来节省功率。降低CPU空闲功率的下一步是降低CPU电压。由于功率与电压成正比（P = V x I），因此，如果我们降低CPU电压，我们还将减少浪费的功率。

降低电压的第一种模式称为C4或“更深的睡眠状态”，它首先在奔腾M处理器（即迅驰平台）上实现，这是针对移动市场的CPU，节电对于延长电池寿命至关重要。此模式在Core Solo，Core Duo（奔腾M的双核版本），Core 2 Duo的所有移动版本和台式机型号为“ 7”或“ 8”（即，型号为2）的台式机上也可用。 ，45纳米CPU）。此模式在65 nm台式机Core 2 Duo CPU（型号以“ 4”或“ 6”开头的型号）上不可用。此模式在AMD的Turion 64处理器上也可用。

深度睡眠状态是从深度睡眠状态获得的，即CPU必须首先进入深度睡眠状态（C3），然后才能从那里降低其内部电压。在Core Duo CPU上，必须通过激活CPU上称为DPRSTP的引脚来完成。

仅为您提供一些有关C4状态如何节省能源的真实示例，让我们考虑移动Core 2 Extreme X9100。在正常模式（C0）下，该CPU在其全时钟下工作时，最大电流消耗为59 A，当CPU处于C4状态时，该电流降至12.2 A，消耗减少了79.32％。在最大电流消耗为47 A的移动Core 2 Duo T9400或T9600上，当CPU处于C4模式时，最大电流消耗降至11.7 A，消耗减少了75.11％。

Core Solo，Core Duo（针对移动市场的奔腾M双核版本，代号为Yonah）和45-nm版本的Mobile Core 2 Duo（即，编号以8或9以及7350开头的型号）型号）具有另一种C4模式，称为“增强型深度睡眠”或简称为C4E，该模式可在禁用L2内存高速缓存后进一步降低CPU电压。此模式在其他CPU上不可用。某些人也将此模式称为C5，即使这不是此模式的真实名称。

让我们举一些C4E状态带来的节电示例。首先让我们考虑一下移动Core 2 Extreme X9100。在正常模式（C0）下，该CPU在其全时钟下工作时，最大电流消耗为59 A，当CPU处于C4E状态时，该电流降至11.7 A，功耗降低了80.17％。在最大电流消耗为47 A的移动Core 2 Duo T9400或T9600上，当CPU处于C4E模式下时，最大电流消耗降至10.5 A，消耗降低了77.66％。

## C6 State

这是45纳米版本的移动Core 2 Duo引入的最新节能功能，即编号从8或9开始的型号和7350型号。重要的是要注意，台式机Core 2 Duo的45 nm版本的台式机版本没有带来此功能，这也称为Deep Power Down。

当CPU进入此状态时，它将整个架构状态保存在特殊的静态RAM中，该RAM由独立的电源供电。这样可以将CPU内部电压降低到任何值，包括0 V，该电压将在CPU空闲时完全关闭。然后，当CPU唤醒时，它将从其特殊的静态RAM中加载所有内部单元的先前状态。当然，从这种状态唤醒CPU所需的时间比我们之前讨论的状态要长得多，但是比关闭计算机然后再将其重新打开并加载操作系统等要快得多。

请注意，整个CPU只有一条电压线（唯一具有不同电压源的组件是上述特殊存储器），降低或关闭CPU电压是一种全有或全无的办法：如果关闭电源CPU，进入C6模式时必须将其完全关闭。

即将面世的Core i7 CPU（代号Nehalem）将具有一个嵌入式电源控制单元，该单元可以降低或关闭CPU各个部分的电压。例如，如果仅CPU的一个处理内核处于空闲状态，则它将只能关闭其中一个内核，使其处于C6模式。在当前的45纳米移动Core 2 Duo CPU上，您无法做到这一点。

为了进入C6状态，CPU必须首先进入C4状态，然后从那里切换到C6状态。

让我们举一些C6状态带来的节电示例。首先让我们考虑一下移动Core 2 Extreme X9100。在正常模式（C0）下，该CPU以其全时钟工作，最大电流消耗为59 A，当CPU处于C6状态时，该电流降至11 A，消耗电流降低了81.35％。在最大电流消耗为47 A的移动Core 2 Duo T9400或T9600上，当CPU处于C6模式下时，最大电流消耗降至5.7 A，功耗显着降低了87.87％。
